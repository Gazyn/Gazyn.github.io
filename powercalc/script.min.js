"use strict";for(var exponents="KMBTabcdefghijklmnopqrstuvwxyz".split(""),i=0;i<26;i++)for(var letter=exponents[i+4],x=0;x<26;x++)exponents.push(letter+exponents[x+4]);var claymore={tier1:{bonus:2.5,base:0},tier2:{bonus:2.2,base:3e3},tier3:{bonus:1.804,base:11460},tier4:{bonus:1.37104,base:32709.6},tier5:{bonus:.959728,base:172896.72},tier6:{bonus:.5758368,base:503738.032},tier7:{bonus:.34550208,base:4302242.8192},tier8:{bonus:.207301248,base:42581345.6915}},flamberge={tier1:{bonus:5,base:0},tier2:{bonus:4.4,base:3e3},tier3:{bonus:3.63,base:10725},tier4:{bonus:2.7951,base:31258.25},tier5:{bonus:1.9984965,base:159849.64875},tier6:{bonus:1.259052795,base:470705.278713},tier7:{bonus:.8057937888,base:3901251.62838},tier8:{bonus:.52376596272,base:37535813.5584}},tomahawk={tier1:{bonus:5.5,base:0},tier2:{bonus:4.84,base:3e3},tier3:{bonus:3.993,base:10725},tier4:{bonus:3.07461,base:31258.25},tier5:{bonus:2.19834615,base:159849.64875},tier6:{bonus:1.3849580745,base:470705.278713},tier7:{bonus:.88637316768,base:3901251.62838},tier8:{bonus:.576142558992,base:37535813.5584}},inGameNumbers=!1;function switchTab(e){switch(tab1.style.visibility="hidden",tab2.style.visibility="hidden",tab3.style.visibility="hidden",tab4.style.visibility="hidden",tab5.style.visibility="hidden",e){case 1:tab1.style.visibility="visible";break;case 2:tab2.style.visibility="visible";break;case 3:tab3.style.visibility="visible";break;case 4:tab4.style.visibility="visible";break;case 5:tab5.style.visibility="visible"}}function updateAwakening1(){70<input1.value&&(input1.value=70);var e=10*input1.value+input1.value*(input1.value-1),t=e-(2*(input1.value-1)+10);return eff1.textContent="Effect: "+Math.floor(e)+"%",1<input1.value?(lasteff1.textContent="Last level's effect: "+Math.floor(t)+"%",rel1.textContent="Relative increase from last level: "+(100*(e/t-1)).toPrecision(3)+"%"):(lasteff1.textContent="Last level's effect: N/A",rel1.textContent="Relative increase from last level: N/A"),e/100+1}function updateAwakening2(){30<input2.value&&(input2.value=30);var e=10*input2.value+input2.value*(input2.value-1),t=e-(2*(input2.value-1)+10);return eff2.textContent="Effect: "+Math.floor(e)+"%",1<input2.value?(lasteff2.textContent="Last level's effect: "+Math.floor(t)+"%",rel2.textContent="Relative increase from last level: "+(100*(e/t-1)).toPrecision(3)+"%"):(lasteff2.textContent="Last level's effect: N/A",rel2.textContent="Relative increase from last level: N/A"),e/100+1}function updateMithrilSword(){45<input3.value&&(input3.value=45);var e,t=input3.value,a=t,n=1;45<=a?n=.35:20<a?(n-=.4,n-=.01*(a-=20)):n-=.02*a,e=t<=20?n+.02:n+.01;var l=100-(100*n).toPrecision(3),r=100-(100*e).toPrecision(3),o=(e/n*100-100).toPrecision(3);return eff3.textContent="Effect: -"+Math.round(l)+"%",1<t?(lasteff3.textContent="Last level's Effect: -"+Math.round(r)+"%",rel3.textContent="Relative increase from last level: "+o+"%"):(lasteff3.textContent="Last level's Effect: N/A",rel3.textContent="Relative increase from last level: N/A"),1/n}function updateMistilteinn(){105<input4.value&&(input4.value=105);var e,t=input4.value,a=t,n=1;105<=a?n=.125:75<a?(n-=.8,n-=.0025*(a-=75)):45<a?(n-=.65,n-=.005*(a-=45)):20<a?(n-=.4,n-=.01*(a-=20)):a<=20&&(n-=.02*a),e=75<t?n+.0025:45<t?n+.005:20<t?n+.01:n+.02;var l=100-Math.floor(1e4*n)/100,r=100-Math.floor(1e4*e)/100,o=Math.floor(e/n*1e4-1e4)/100;return eff4.textContent="Effect: -"+Math.floor(20*l)/20+"%",1<t?(lasteff4.textContent="Last level's Effect: -"+Math.floor(20*r)/20+"%",rel4.textContent="Relative increase from last level: "+o+"%"):(lasteff4.textContent="Last level's Effect: N/A",rel4.textContent="Relative increase from last level: N/A"),1/n}function updateGoldenGloves(){var e,t=input5.value,a=t,n=0;200<=a?(n+=3e3,n+=10*(a-=200)):n+=15*a,e=200<t?n-10:n-15;var l=Math.floor(n),r=Math.floor(e),o=(n/e*100-100).toPrecision(3);return eff5.textContent=1==inGameNumbers?"Effect: "+formatNumber(Math.round(l))+"%":"Effect: "+Math.round(l)+"%",1<t?(lasteff5.textContent=1==inGameNumbers?"Last level's Effect: "+formatNumber(Math.round(r))+"%":"Last level's Effect: "+Math.round(r)+"%",rel5.textContent="Relative increase from last level: "+o+"%"):(lasteff5.textContent="Last level's Effect: N/A",rel5.textContent="Relative increase from last level: N/A"),n/100+1}function updateGoldVessels(){var e,t=input6.value,a=t,n=0;100<=a?(n+=1e3,n+=5*(a-=100)):n+=10*a,e=100<t?n-5:n-10;var l=Math.floor(n),r=Math.floor(e),o=(n/e*100-100).toPrecision(3);return eff6.textContent=1==inGameNumbers?"Effect: "+formatNumber(Math.round(l))+"%":"Effect: "+Math.round(l)+"%",1<t?(lasteff6.textContent=1==inGameNumbers?"Last level's Effect: "+formatNumber(Math.round(r))+"%":"Last level's Effect: "+Math.round(r)+"%",rel6.textContent="Relative increase from last level: "+o+"%"):(lasteff6.textContent="Last level's Effect: N/A",rel6.textContent="Relative increase from last level: N/A"),n/100+1}function updatePhilosophersStone(){var e=input7.value,t=e,a=0;500<=t?(a+=5e3,a+=2*(t-=500)):a+=10*t;var n=500<e?a-2:a-10,l=Math.floor(a),r=Math.floor(n),o=(a/n*100-100).toPrecision(3);return eff7.textContent=1==inGameNumbers?"Effect: "+formatNumber(Math.round(l))+"%":"Effect: "+Math.round(l)+"%",1<e?(lasteff7.textContent=1==inGameNumbers?"Last level's Effect: "+formatNumber(Math.round(r))+"%":"Last level's Effect: "+Math.round(r)+"%",rel7.textContent="Relative increase from last level: "+o+"%"):(lasteff7.textContent="Last level's Effect: N/A",rel7.textContent="Relative increase from last level: N/A"),a/100+1}function updateHalberd(){var e=input8.value,t=e,a=0;100<=t?(a+=1e3,a+=5*(t-=100)):a+=10*t;var n=100<e?a-5:a-10,l=Math.floor(a),r=Math.floor(n),o=(a/n*100-100).toPrecision(3);return eff8.textContent=1==inGameNumbers?"Effect: "+formatNumber(Math.round(l))+"%":"Effect: "+Math.round(l)+"%",1<e?(lasteff8.textContent=1==inGameNumbers?"Last level's Effect: "+formatNumber(Math.round(r))+"%":"Last level's Effect: "+Math.round(r)+"%",rel8.textContent="Relative increase from last level: "+o+"%"):(lasteff8.textContent="Last level's Effect: N/A",rel8.textContent="Relative increase from last level: N/A"),a/100+1}function updateCaduceus(){600<input9.value&&(input9.value=600);var e=input9.value,t=e,a=0;600==t?a=28:200<t?(a+=20,a+=.02*(t-=200)):a+=.1*t;var n=200<e?a-.02:a-.1,l=Math.round(100*a),r=Math.round(100*n),o=(a/n*100-100).toPrecision(3);return eff9.textContent="Effect: "+Math.round(l)+"%",1<e?(lasteff9.textContent="Last level's Effect: "+Math.round(r)+"%",rel9.textContent="Relative increase from last level: "+o+"%"):(lasteff9.textContent="Last level's Effect: N/A",rel9.textContent="Relative increase from last level: N/A"),a+1}function updateCoatOfGold(){300<input10.value&&(input10.value=300);var e=input10.value,t=e,a=0;300==t?a=9:100<t?(a+=5,a+=.02*(t-=100)):a+=.05*t;var n=100<e?a-.02:a-.05,l=Math.round(100*a),r=Math.round(100*n),o=(a/n*100-100).toPrecision(3);return eff10.textContent="Effect: "+Math.round(l)+"%",1<e?(lasteff10.textContent="Last level's Effect: "+Math.round(r)+"%",rel10.textContent="Relative increase from last level: "+o+"%"):(lasteff10.textContent="Last level's Effect: N/A",rel10.textContent="Relative increase from last level: N/A"),a+1}function formatNumber(e){if(1e3<=(e=Math.floor(e))){var t=exponents[Math.floor(Math.log(e)/Math.log(1e3))-1];console.log("var exponent = "+t);var a=(e/Math.pow(1e3,exponents.indexOf(t)+1)).toFixed(3);console.log("var noExpo = "+a);var n=a.toString().replace(".",t);console.log("var finalResult = "+n),1e6<=e&&(n+=exponents[exponents.indexOf(t)-1],console.log("finalResult = "+n))}else n=e;return console.log("Done! Returning "+n),n}function parseFormat(e){var t;for(var a in e=e.toString(),exponents)-1!=e.toString().indexOf(exponents[a])&&(t=exponents[a]);return void 0===t?(console.log("No letter. Returning input: "+e),e):(e=(e=e.replace(/[a-z]/i,".")).replace(/[a-z]/gi,""),/(?!\.\d{3,})(\.\d+)/gi.test(e)&&(1===e.match(/(?!\.\d{3,})(\.\d+)/gi)[0].replace(".","").length?e=e.replace(/(?!\.\d{3,})(\.\d+)/gi,"!00$&").replace(".","").replace("!","."):2===e.match(/(?!\.\d{3,})(\.\d+)/gi)[0].replace(".","").length&&(e=e.replace(/(?!\.\d{3,})(\.\d+)/gi,"!0$&").replace(".","").replace("!","."))),(parseFloat(e)*Math.pow(1e3,exponents.indexOf(t)+1)).toPrecision(6))}function updatePower(){totalpowerdisplay.textContent=!0===inGameNumbers?"Total Power Index: "+formatNumber(((parseFormat(baseAttackInput.value)/100+1)*updateAwakening1()*updateAwakening2()*updateMithrilSword()*updateMistilteinn()*updateHalberd()*updatePhilosophersStone()*updateGoldenGloves()*updateCaduceus()*updateGoldVessels()*updateCoatOfGold()).toPrecision(6)):"Total Power Index: "+((baseAttackInput.value/100+1)*updateAwakening1()*updateAwakening2()*updateMithrilSword()*updateMistilteinn()*updateHalberd()*updatePhilosophersStone()*updateGoldenGloves()*updateCaduceus()*updateGoldVessels()*updateCoatOfGold()).toPrecision(4).replace("+","")}function updateFloor(){if(!0===inGameNumbers)var e=parseFormat(floorPowerInput.value);else e=parseFloat(floorPowerInput.value);var t=1+(1.73+.00101*parseInt(topFloorInput.value))/100,a=5*Math.round(Math.log(e)/Math.log(t)*.98/5),n=5*Math.round(Math.log(e)/Math.log(t)*1.02/5);floorEstimateOutput.textContent=a+" - "+n}function updateGoldBox(){if(""!=goldboxinput.value){for(var e=goldboxinput.value,t=10,a=1,n=!0;t<=e;)n?(a+=1,t*=5,n=!1):(a+=1,t*=2,n=!0);var l=Math.pow(4,a-1)*Math.pow(e,2)+Math.pow(4,a)*e;goldBoxOutput.textContent=1==inGameNumbers?formatNumber(l)+" gold on new dungeon":1e21<=l?l.toPrecision(3)+" gold on new dungeon":l+" gold on new dungeon"}else goldBoxOutput.textContent="0 gold on new dungeon"}function calcAttack(e,t){if(""==t)return 0;var a;switch(t=parseInt(t),e){case 1:if(t<=18)switch(t){case 0:return 0;case 1:return 30;case 2:return 65;case 3:return 100;case 4:return 140;case 5:return 185;case 6:return 230;case 7:return 280;case 8:return 330;case 9:return 385;case 10:return 460;case 11:return 535;case 12:return 610;case 13:return 690;case 14:return 770;case 15:return 850;case 16:return 935;case 17:return 1030;case 18:return 1130}return 19<=t&&t<=96&&(a="tier1"),97<=t&&t<=142&&(a="tier2"),143<=t&&t<=218&&(a="tier3"),219<=t&&t<=580&&(a="tier4"),581<=t&&t<=924&&(a="tier5"),925<=t&&t<=4057&&(a="tier6"),4058<=t&&t<=16639&&(a="tier7"),16640<=t&&(a="tier8"),5*Math.floor(Math.floor(claymore[a].bonus*t*(7+t)+claymore[a].base)/5);case 2:return t<=47&&(a="tier1"),48<=t&&t<=77&&(a="tier2"),78<=t&&t<=130&&(a="tier3"),131<=t&&t<=381&&(a="tier4"),382<=t&&t<=619&&(a="tier5"),620<=t&&t<=2721&&(a="tier6"),2722<=t&&t<=10891&&(a="tier7"),10892<=t&&(a="tier8"),5*Math.floor(Math.floor(flamberge[a].bonus*t*(59+t)+flamberge[a].base)/5);case 3:return t<=13&&(a="tier1"),14<=t&&t<=27&&(a="tier2"),28<=t&&t<=58&&(a="tier3"),59<=t&&t<=260&&(a="tier4"),261<=t&&t<=476&&(a="tier5"),477<=t&&t<=2465&&(a="tier6"),2466<=t&&t<=10250&&(a="tier7"),10251<=t&&(a="tier8"),5*Math.floor(Math.floor(tomahawk[a].bonus*t*(326.27272728+t)+tomahawk[a].base)/5)}}function updateRunAttack(){var e,t,a,n=parseInt(claymoreInput.value)+parseInt(claymoreGainInput.value),l=parseInt(flambergeInput.value)+parseInt(flambergeGainInput.value),r=parseInt(tomahawkInput.value)+parseInt(tomahawkGainInput.value);e=""==claymoreGainInput.value?0:calcAttack(1,n)-calcAttack(1,claymoreInput.value),t=""==flambergeGainInput.value?0:calcAttack(2,l)-calcAttack(2,flambergeInput.value),a=""==tomahawkGainInput.value?0:calcAttack(3,r)-calcAttack(3,tomahawkInput.value),1==inGameNumbers?(claymoreAfter.textContent=formatNumber(e)+"%",flambergeAfter.textContent=formatNumber(t)+"%",tomahawkAfter.textContent=formatNumber(a)+"%",totalAttackPerRun.textContent=formatNumber(e+t+a)+"%"):(claymoreAfter.textContent=e+"%",flambergeAfter.textContent=t+"%",tomahawkAfter.textContent=a+"%",totalAttackPerRun.textContent=e+t+a+"%")}function updateAttacks(){""==claymoreInput.value&&(claymoreInput.value=0),""==claymoreGainInput.value&&(claymoreGainInput.value=0),""==flambergeInput.value&&(flambergeInput.value=0),""==flambergeGainInput.value&&(flambergeGainInput.value=0),""==tomahawkInput.value&&(tomahawkInput.value=0),""==tomahawkGainInput.value&&(tomahawkGainInput.value=0),1==inGameNumbers?(1<parseInt(claymoreInput.value)?(claymoreeff.textContent="Effect: "+formatNumber(calcAttack(1,claymoreInput.value))+"%",claymorerel.textContent="Relative increase from last level: "+(calcAttack(1,claymoreInput.value)/calcAttack(1,claymoreInput.value-1)*100-100).toPrecision(3)+"%",claymoreinc.textContent="Last level's effect: "+formatNumber(calcAttack(1,claymoreInput.value-1))+"%"):(1===parseInt(claymoreInput.value)?claymoreeff.textContent="Effect: 30%":claymoreeff.textContent="Effect: 0%",claymorerel.textContent="Relative increase from last level: N/A",claymoreinc.textContent="Last level's effect: N/A"),1<parseInt(flambergeInput.value)?(flambergeeff.textContent="Effect: "+formatNumber(calcAttack(2,flambergeInput.value))+"%",flambergerel.textContent="Relative increase from last level: "+(calcAttack(2,flambergeInput.value)/calcAttack(2,flambergeInput.value-1)*100-100).toPrecision(3)+"%",flambergeinc.textContent="Last level's effect: "+formatNumber(calcAttack(2,flambergeInput.value-1))+"%"):(1===parseInt(flambergeInput.value)?flambergeeff.textContent="Effect: 300%":flambergeeff.textContent="Effect: 0%",flambergerel.textContent="Relative increase from last level: N/A",flambergeinc.textContent="Last level's effect: N/A"),1<parseInt(tomahawkInput.value)?(tomahawkeff.textContent="Effect: "+formatNumber(calcAttack(3,tomahawkInput.value))+"%",tomahawkrel.textContent="Relative increase from last level: "+(calcAttack(3,tomahawkInput.value)/calcAttack(3,tomahawkInput.value-1)*100-100).toPrecision(3)+"%",tomahawkinc.textContent="Last level's effect: "+formatNumber(calcAttack(3,tomahawkInput.value-1))+"%"):(1===parseInt(tomahawkInput.value)?tomahawkeff.textContent="Effect: 1K800%":tomahawkeff.textContent="Effect: 0%",tomahawkrel.textContent="Relative increase from last level: N/A",tomahawkinc.textContent="Last level's effect: N/A")):(1<parseInt(claymoreInput.value)?(claymoreeff.textContent="Effect: "+calcAttack(1,claymoreInput.value)+"%",claymorerel.textContent="Relative increase from last level: "+(calcAttack(1,claymoreInput.value)/calcAttack(1,claymoreInput.value-1)*100-100).toPrecision(3)+"%",claymoreinc.textContent="Last level's effect: "+calcAttack(1,claymoreInput.value-1)+"%"):(1===parseInt(claymoreInput.value)?claymoreeff.textContent="Effect: 30%":claymoreeff.textContent="Effect: 0%",claymorerel.textContent="Relative increase from last level: N/A",claymoreinc.textContent="Last level's effect: N/A"),1<parseInt(flambergeInput.value)?(flambergeeff.textContent="Effect: "+calcAttack(2,flambergeInput.value)+"%",flambergerel.textContent="Relative increase from last level: "+(calcAttack(2,flambergeInput.value)/calcAttack(2,flambergeInput.value-1)*100-100).toPrecision(3)+"%",flambergeinc.textContent="Last level effect: "+calcAttack(2,flambergeInput.value-1)+"%"):(1===parseInt(flambergeInput.value)?flambergeeff.textContent="Effect: 300%":flambergeeff.textContent="Effect: 0%",flambergerel.textContent="Relative increase from last level: N/A",flambergeinc.textContent="Last level's effect: N/A"),1<parseInt(tomahawkInput.value)?(tomahawkeff.textContent="Effect: "+calcAttack(3,tomahawkInput.value)+"%",tomahawkrel.textContent="Relative increase from last level: "+(calcAttack(3,tomahawkInput.value)/calcAttack(3,tomahawkInput.value-1)*100-100).toPrecision(3)+"%",tomahawkinc.textContent="Last level effect: "+calcAttack(3,tomahawkInput.value-1)+"%"):(1===parseInt(tomahawkInput.value)?tomahawkeff.textContent="Effect: 1800%":tomahawkeff.textContent="Effect: 0%",tomahawkrel.textContent="Relative increase from last level: N/A",tomahawkinc.textContent="Last level's effect: N/A")),updateRunAttack()}function updateAll(){updatePower(),updateFloor(),updateGoldBox(),updateAttacks(),updateNotation()}function updateNotation(){var e=notationInput.value;e=e.split("").reverse().join("");for(var t="abcdefghijklmnopqrstuvwxyz".split(""),a=4,n=0;n<e.length;n+=1)a+=(t.indexOf(e[n])+1)*Math.pow(26,n);a=(3*a).toPrecision(100).toString(),/\.\d*/gi.test(a)&&(a=a.replace(/\.\d*/gi,"")),notationOutput.textContent="e"+a}function toggleFormat(){inGameNumbers=!!numbersCheck.checked,updateAll()}inGameNumbers=!!numbersCheck.checked,updateAll();